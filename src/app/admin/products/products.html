<div class="products-page">

  <div class="header">
    <div>
      <h1>Products</h1>
      <p>Manage inventory, pricing and stock status</p>
    </div>

    <button class="add-btn">
      + Add Product
    </button>
  </div>

  <div class="toolbar">
    <input
      type="text"
      placeholder="Search by name or SKU..."
      [(ngModel)]="search"
      (input)="onSearchChange()"
    />

    <select [(ngModel)]="selectedCategory" (change)="applyFilters()">
      <option value="all">All Categories</option>
      <option *ngFor="let cat of categories" [value]="cat">
        {{ cat }}
      </option>
    </select>

    <select [(ngModel)]="sortBy" (change)="applyFilters()">
      <option value="name">Sort: Name</option>
      <option value="price">Sort: Price</option>
      <option value="stock">Sort: Stock</option>
    </select>
  </div>


  <div class="table-card">
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>SKU</th>
          <th>Category</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let product of filteredProducts">
          <td class="product-cell">
            <img
              [src]="product.image || 'https://via.placeholder.com/40'"
              alt="product"
            />
            <span>{{ product.name }}</span>
          </td>

          <td>{{ product.sku || 'â€”' }}</td>
          <td>{{ product.category }}</td>
          <td>${{ product.price }}</td>

          <td>
            <div class="stock-bar">
              <div
                class="stock-fill"
                [style.width.%]="getStockPercent(product.stock)"

                [class.low]="product.stock < 10"
              ></div>
            </div>
            <small>{{ product.stock }} units</small>
          </td>

          <td>
            <span
            class="status"
            [class.active]="product.active"
            [class.inactive]="!product.active"
            (click)="toggleStatus(product)"
            title="Click to toggle status"
          >
            {{ product.active ? 'Active' : 'Inactive' }}
          </span>



          </td>

          <td class="actions">
            <button class="edit" (click)="editProduct(product)">
              Edit
            </button>
            <button class="delete" (click)="deleteProduct(product)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
